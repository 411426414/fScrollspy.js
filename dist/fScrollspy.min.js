!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b()}):"undefined"!=typeof module&&module.exports?module.exports=b():window[a]=b()}("Scrollspy",function(){"use strict";function a(b){this.options=$.extend(a.DEFAULT,b),this.$body=$(document.body),this.$scrollElement=$(this.options.scrollElement),this.scrollTopTmp=0,this.selector=this.options.selector,this.selectorTop=$(this.selector).offset().top,this.activeCls=this.options.activeCls,this.activeTarget=null,this.targets=[],this.offsets=[],this.scrollHeight=0,this.$scrollElement.on("scroll",$.proxy(this.process,this)),this.refresh(),this.process()}return a.VERSION="1.0.0",a.DEFAULT={scrollElement:window,offset:10,selector:".nav a",activeCls:"on",reachSelector:$.noop,leaveSelector:$.noop,reachTarget:$.noop,leaveTarget:$.noop,scrollDown:$.noop,scrollUp:$.noop},a.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},a.prototype.refresh=function(){var a=this;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),this.$body.find(this.selector).map(function(){var a=$(this),b=a.attr("href"),c=/^#./.test(b)&&$(b);return c&&c.length&&c.is(":visible")&&[[c.offset().top,b]]||null}).each(function(){a.offsets.push(this[0]),a.targets.push(this[1])})},a.prototype.process=function(){var a,b=this.offsets,c=this.targets,d=this.$scrollElement.scrollTop(),e=d+this.options.offset,f=this.getScrollHeight(),g=this.options.offset+f-this.$scrollElement.height(),h=0,i=this.activeTarget;if(h=function(){var a=$(c[0]).offset().top;return c.forEach(function(b){a+=$(b).height()}),a}(),d>this.scrollTopTmp?this.options.scrollDown():this.options.scrollUp(),this.scrollTopTmp=d,this.scrollHeight!=f&&this.refresh(),e>=$(c[0]).offset().top&&h>=e&&this.options.reachTarget.call(this),e>=h)return void this.options.leaveTarget.call(this);if(e>=g)return void(i!=(a=c[c.length-1])&&this.activate(a));d>=this.selectorTop&&this.options.reachSelector.call(this),d<=this.selectorTop&&this.options.leaveSelector.call(this),i&&e<=b[0]&&(this.activeTarget=null,this.clear());for(var j=b.length;j--;)i!=c[j]&&e>=b[j]&&(void 0===b[j+1]||e<b[j+1])&&this.activate(c[j])},a.prototype.activate=function(a){this.activeTarget=a,this.clear(),$(this.selector+'[href="'+a+'"]').addClass(this.activeCls)},a.prototype.clear=function(){$(this.selector+"."+this.activeCls).removeClass(this.activeCls)},a});